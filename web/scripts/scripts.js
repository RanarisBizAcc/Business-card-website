const citiesArray = [
    {Id: 1, Name: 'stpitersburg', Title:'Санкт-Петербург', Description: 'Большой город с интересной историей'},
    {Id: 2, Name: 'tbilisi', Title:'Тбилиси', Description: 'Красивое место с духом Европы'},
    {Id: 3, Name: 'yerevan', Title:'Ереван', Description: 'Неожиданно и очень приятно'},
    {Id: 4, Name: 'kazan', Title:'Казань', Description: 'Колорит, независимость и красота'},
    {Id: 5, Name: 'kas', Title:'Каш', Description: 'Море, горы и жара'},
    {Id: 6, Name: 'nsk', Title:'Новосибирск', Description: 'Большой и шумный городок'},
    {Id: 7, Name: 'nvkz', Title:'Новокузнецк', Description: 'Зелёный город с промышленным настроением'},
    {Id: 8, Name: 'vladivostok', Title:'Владивосток', Description: 'Город ветров, вкусов и воспоминаний'},
];
const citiesTextsArray = [
    {CityId: 1, Blocks: [
        'Блок текста про Питер 1',
        'Блок текста про Питер 2'
        ]
    },
    {CityId: 2, Blocks: [
        'Блок текста про Тбилиси 1',
        'Блок текста про Тбилиси 2'
        ]
    },
    {CityId: 3, Blocks: [
        'Блок текста про Ереван 1',
        'Блок текста про Ереван 2'
        ]
    },
    {CityId: 4, Blocks: [
        'Блок текста про Казань 1',
        'Блок текста про Казань 2'
        ]
    },
    {CityId: 5, Blocks: [
        'Каш — это город, который буквально прилипает к склонам гор и будто сползает к морю, открывая невероятные виды на каждый шаг.<br><br>Он как открытка: разноцветные ' +
        'домики, узкие петляющие улочки, цветы в горшках, солнце, блестящее в воде. Турецкий по духу, но с явным греческим акцентом — ощущается в деталях, в ландшафте, в ' +
        'атмосфере. Он будто и не про страну, а про состояние: расслабленное, свободное, не обязывающее ни к чему.<br><br>Город живёт туристами — это чувствуется сразу. ' +
        'Заведения на каждом углу, и хотя выбор большой, у каждого гостя быстро появляется свой маршрут и свои любимые места. За атмосферой и идеальным кофе с сан-себастьяном ' +
        'хочется вернуться в GODO. А чтобы плотно поесть — Noel Baba на центральной площади или Kas Bistro у пляжей. Всё вкусно, просто, приятно и совсем не по-туристически ' +
        'бездушно.',
        'Каш — это не только про еду и виды, но и про ощущение цельности. Здесь пляжи становятся частью ритма жизни, а не просто точкой на карте. Бич-клабы — находка: ' +
        'поплавал, поел, отдохнул, снова в воду — и всё это не за сумасшедшие деньги. Местные пляжи хочется обойти все — они разные, но каждый хорош по-своему. И в какой-то ' +
        'момент понимаешь, что нет смысла выбирать любимый — просто идёшь, куда хочется.<br><br>Некоторые места в Каше цепляют особенно сильно. Пляж Капуташ — это ' +
        'захватывающая красота: резкий обрыв, лестница вниз, бирюзовая вода и камни, будто выточенные вручную. Античный театр в центре города оживает каждый вечер под звуки ' +
        'живой музыки — сцена, на которую хочется сесть и просто смотреть на звёзды. Вертолётная площадка — неожиданно уединённое и красивое место для купания. А узкие ' +
        'тропинки, ведущие то вверх, то вниз, создают ощущение бесконечного путешествия даже в границах небольшого города.<br><br>Каш расслабляет. Он будто специально создан ' +
        'для того, чтобы сбавить темп, дать телу тепло, глазам — цвет, а голове — тишину. Вернуться сюда хочется. Не навсегда и, может быть, не надолго — недели вполне хватит, ' +
        'чтобы почувствовать главное. Но в памяти он остаётся надолго — тёплый, залитый солнцем, чуть уставший, но очень живой.'
        ]
    },
    {CityId: 6, Blocks: [
        'Новосибирск — это большой и шумный городок, в котором жизнь идёт быстро и громко, но при этом остаётся что-то цепляющее, настоящее. Он не сразу открывает свои лучшие ' +
        'стороны, но если задержаться подольше, то начинаешь замечать нюансы — те самые, что остаются в памяти после поездки.<br><br>Районы города сильно различаются по ' +
        'характеру. Академгородок — современное и ухоженное пространство, живущее наукой, технологиями и спокойной уверенностью в себе. Было бы идеально, если бы он ' +
        'находился поближе к центру жизни города, но и в своей удалённости он притягателен. Правый берег — красивый, насыщенный, с интересной архитектурой, большим выбором ' +
        'заведений, уютными скверами и площадями. Левый берег — проще, серее, но всё не так однозначно. Здесь тоже можно найти хорошие места, просто нужно знать, куда идти ' +
        'и смотреть немного глубже. Визуально он уступает, но по-своему интересен.<br><br>Общее ощущение от города — движение. Вокруг всё крутится: машины, люди, ветры, ' + 
        'настроение. Это утомляет, но и бодрит. Новосибирск не позволяет расслабиться, но именно за счёт этого запоминается.',
        'Еда в городе — отдельная тема. Я отлично провёл время в "Shredder Pizza", где вкус и атмосфера идут рука об руку. Хорошее пиво и сытные блюда в "Gusi в городе" ' +
        'запомнились почти как идеальный вечер с друзьями. А в "Перчини" я нашёл ту самую пасту и гаспачо, которые хочется повторить. Удивительно, но в городе ощущается широкий ' +
        'гастрономический выбор, и это не формальность, а настоящий интерес к качеству.<br><br>Культурная жизнь в Новосибирске радует. Здесь действительно есть всё: от ' +
        'классических концертов в филармонии до картинга на крыше торгового центра. Город не даёт заскучать — каждый вечер можно провести по-разному. И если хочется смены ' +
        'ритма, то всегда найдётся место, которое даст это ощущение.<br><br>Новосибирск может показаться шумным, серым и перегруженным. Но если быть честным — в этом и его прелесть.' +
        'Он живой. Он настоящий. И, может быть, не сразу дружелюбный, но точно достойный того, чтобы с ним познакомиться поближе.'
        ]
    },
    {CityId: 7, Blocks: [
        'Новокузнецк — это удивительное сочетание зелени и тяжеловесного индустриального прошлого. На первый взгляд он может показаться типичным промышленным городком, ' +
        'особенно если сравнивать с соседями по региону. Но если немного остановиться и приглядеться, начинаешь замечать детали: здания, где архитектура действительно на ' +
        'своём месте, уютные зелёные зоны, мягкую энергетику улиц. Это не город, который кричит о себе, а скорее тот, что спокойно живёт своей жизнью.<br><br>' +
        'Общее ощущение от города — спокойствие. Здесь нет спешки, нет перегруженности. Люди движутся своим темпом, улицы не давят, а скорее дают пространство. При этом город ' +
        'не выглядит пустым или блеклым — он живой, но не суетливый. Это редкое сочетание.',
        'Очень порадовали местные заведения. В районе сквера Ермакова — настоящее гастрономическое сердце города: множество ресторанчиков, в которых можно вкусно поесть и ' + 
        'просто хорошо провести время. Культурно тоже есть, куда сходить. Галерея "2 Суворова" оставляет приятное послевкусие от визуального искусства, а Драмтеатр — отличное ' + 
        'место, чтобы ненадолго оторваться от повседневности.<br><br>Навигация по городу — удовольствие. Компактность Новокузнецка делает его понятным и предсказуемым: сложно ' +
        'потеряться, легко планировать маршрут. А зелени здесь действительно много — и она заметно смягчает общее впечатление от индустриального фона, которого всё же немало.' +
        '<br><br>Новокузнецк не бросается в глаза, но запоминается. В нём есть баланс — между шумом заводов и тишиной скверов, между тяжёлым воздухом и лёгкой прогулкой. Это ' +
        'город, в котором хорошо просто быть.'
        ]
    },
    {CityId: 8, Blocks: [
        'Владивосток — это город, который легко заинтересовывает с первого взгляда.<br><br>Центр манит своей плотной застройкой, разнородной архитектурой и жизнью на каждом ' + 
        'перекрёстке. А вот Первомайский район стал для меня настоящим окном в прошлое — здесь всё ещё много частного сектора, странно извивающихся дорог, неожиданных поворотов' +
        ', но при этом удивительно много уютных, почти спрятанных от глаз мест.<br><br>Одним из таких открытий стал грузинский ресторан «Супра». Невероятно вкусная кухня, тёплая ' +
        'атмосфера и очередь местных жителей за самовывозом говорят сами за себя. Конечно, я не обошёл стороной и морскую кухню: ресторан Studio покорил меня пастой с чернилами ' +
        'каракатицы и видом на аквариум с крабами — сочетание, которое трудно забыть.' +
        'Погода в мае, как оказалось, совсем не радует теплом. Владивосток встретил меня ветром, тучами и холодными дождями. Но даже в этом есть своя романтика: сильные ' +
        'порывы с моря придают городу особую атмосферу — живую, почти суровую, но красивую.',
        'С культурной стороны Владивосток порадовал. Балет в филиале Мариинского театра ' + 
        'стал ярким моментом поездки. Галерея в Приморском музее — ещё один штрих к общей картине. Приятно удивила и набережная: когда-то я гулял по ней в детстве, и приятно ' + 
        'было убедиться, что она всё ещё красива. Особое впечатление оставил маяк Токаревского — интерактив с приливом добавил азарта: на маяк можно попасть только в отлив, ' +
        'но не стоит задерживаться — вода возвращается стремительно. А Русский остров и океанариум — это отдельный восторг и уважение к природе и инфраструктуре.<br><br>Сначала ' + 
        'город встретил меня не лучшим образом — были проблемы с гостиницей, да и погодные условия не радовали. Но всё остальное — вкус, ритм, виды, воспоминания — всё ' +
        'это оставило глубокий и тёплый след. Я не уверен, что вернусь сюда вновь, но знаю точно: Владивосток способен подарить очень многое, если его правильно распаковать.'
        ]
    },
];

function getCityByName(cityName) {
    const city = citiesArray.find(item => item.Name === cityName.replace("#", ""));
    return city;
};

function getCityByTitle(cityTitle) {
    const city = citiesArray.find(item => item.Title === cityTitle);
    return city;
};

function getCityById(cityId) {
    const city = citiesArray.find(item => item.Id == cityId);
    return city;
};

function getAllButOneOfTheCities(exceptCityId) {
    const cities = citiesArray.filter(item => item.Id != exceptCityId);
    return cities;
};

function getPhotosNamesByCityId(cityId) {
    let photosNames = [];

    const city = getCityById(cityId);
    if (city != undefined) {
        photosNames.push(city.Name + '_1.jpg');
        photosNames.push(city.Name + '_2.jpg');
    }

    return photosNames;
};

function getCoverName(cityId) {
    let coverName = 'somewhere.png';

    const city = getCityById(cityId);
    if (city != undefined) {
        coverName = city.Name + '.png';
    }

    return coverName;
};

function getCityTextBlocks(cityId) {
    let textBlocks = [];

    const city = getCityById(cityId);
    if (city != undefined) {
        const cityText = citiesTextsArray.find(item => item.CityId == cityId);
        if (cityText != undefined){
            return cityText.Blocks;
        }
    }

    return textBlocks;
};

function goToSelectedCity(cityId) {
    const city = getCityById(cityId);
    window.location.href = `city.html#${city.Name}`;
};

function goToAnotherCity(cityCard) {
    const cityTitle = cityCard.querySelector('h3').textContent;
    const сity = getCityByTitle(cityTitle);
    window.location.hash = сity.Name;
    fillDocument();
};

function goToAnotherCityById(cityId) {
    const сity = getCityById(cityId);
    window.location.hash = сity.Name;
    fillDocument();
};

function fillDocument() {
    const currentUrlHash = window.location.hash;
    const city = getCityByName(currentUrlHash);
    const anotherCitiesArray = getAllButOneOfTheCities(city.Id);
    const photos = getPhotosNamesByCityId(city.Id);
    const cityTextBlocks = getCityTextBlocks(city.Id);

    let docTitle = document.getElementById('title');
    let docDescription = document.getElementById('description');
    let docCover = document.getElementById('first-image');
    let docParagraphFirst = document.getElementById('paragraph-1');
    let docParagraphSecond = document.getElementById('paragraph-2');
    let docImageFirst = document.getElementById('image-1');
    let docImageSecond = document.getElementById('image-2');
    let docAnotherCityCards = document.getElementById('another-city-cards');

    docTitle.textContent = city.Title;
    docDescription.textContent = city.Description;
    docCover.src = '../resources/covers/' + getCoverName(city.Id);
    docParagraphFirst.innerHTML  = cityTextBlocks[0];
    docParagraphSecond.innerHTML = cityTextBlocks[1];
    docImageFirst.src = '../resources/photos/' + photos[0];
    docImageSecond.src = '../resources/photos/' + photos[1];

    for(let i = 0; i < docAnotherCityCards.children.length; i++) {
        let cardBlock = docAnotherCityCards.children[i];

        let cardImg = cardBlock.querySelector('img');
        let cardHeader = cardBlock.querySelector('h3');
        let cardDescription = cardBlock.querySelector('p');
        
        let cardCity = anotherCitiesArray[i];

        cardImg.src = '../resources/covers/' + getCoverName(cardCity.Id);
        cardHeader.textContent = cardCity.Title;
        cardDescription.textContent = cardCity.Description;
    };

    window.scrollTo({top: 0});
};

document.addEventListener('DOMContentLoaded', function () {
    const currentUrlHash = window.location.hash;
    if (currentUrlHash != '') {
        fillDocument();
    }
});